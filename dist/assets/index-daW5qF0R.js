var b=o=>{throw TypeError(o)};var v=(o,e,t)=>e.has(o)||b("Cannot "+t);var n=(o,e,t)=>(v(o,e,"read from private field"),t?t.call(o):e.get(o)),d=(o,e,t)=>e.has(o)?b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(o):e.set(o,t),m=(o,e,t,s)=>(v(o,e,"write to private field"),s?s.call(o,t):e.set(o,t),t),L=(o,e,t)=>(v(o,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();async function E(o,e={}){const t={Accept:"application/json",...e.headers},s=await fetch(o,{...e,headers:t});if(s.ok)return s.json();throw new Error("Server error",{cause:s})}function h(o,e,t){const s=document.createElement(o);for(const[r,i]of Object.entries(e))i!=null&&s.setAttribute(r,i);return t!=null&&(s.innerText=t),s}function T(o,e){return o.append(document.getElementById(e).content.cloneNode(!0))}var u,c,p,f,w;class S{constructor(e){d(this,f);d(this,u,[]);d(this,c,[]);d(this,p,e=>{const t=e.currentTarget;e.preventDefault();const s=new FormData(t).get("title").toString(),r={id:n(this,u).length+1,title:s,completed:!1},i=new y(r);n(this,c).prepend(i.element),t.reset()});m(this,u,e)}appendTo(e){T(e,"todolist-template"),m(this,c,e.querySelector(".list-group"));for(let t of n(this,u)){const s=new y(t);n(this,c).append(s.element)}e.querySelector("form").addEventListener("submit",t=>n(this,p).call(this,t)),e.querySelectorAll(".todolist-nav button").forEach(t=>{t.addEventListener("click",s=>L(this,f,w).call(this,s))})}}u=new WeakMap,c=new WeakMap,p=new WeakMap,f=new WeakSet,w=function(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-filter");e.currentTarget.parentElement.querySelector(".active").classList.remove("active"),e.currentTarget.classList.add("active"),t==="todo"?(n(this,c).classList.add("hide-completed"),n(this,c).classList.remove("hide-todo")):t==="done"?(n(this,c).classList.add("hide-todo"),n(this,c).classList.remove("hide-completed")):(n(this,c).classList.remove("hide-todo"),n(this,c).classList.remove("hide-completed"))};var l;class y{constructor(e){d(this,l);const t=`todo-${e.id}`,s=h("li",{class:"todolist-item"});m(this,l,s);const r=h("input",{class:"todo-checkbox",type:"checkbox",id:t,checked:e.completed?"":null}),i=h("label",{class:"todolist-item-label",for:t},e.title),a=h("button",{class:"btn-trash"});a.innerHTML=`
        
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
  <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
</svg>

        `,s.append(r),s.append(i),s.append(a),this.toggle(r),a.addEventListener("click",g=>this.remove(g)),r.addEventListener("change",g=>this.toggle(g.currentTarget))}get element(){return n(this,l)}remove(e){e.preventDefault(),n(this,l).remove()}toggle(e){e.checked?n(this,l).classList.add("is-completed"):n(this,l).classList.remove("is-completed")}}l=new WeakMap;async function O(){try{const o=await E("https://jsonplaceholder.typicode.com/todos?_limit=5");new S(o).appendTo(document.getElementById("todolist"))}catch{const e=h("div",{class:"alert alert-danger m-2",role:"alert"},"Impossible de charger les todos");document.body.prepend(e)}}O();
